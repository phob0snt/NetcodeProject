
//-----------------------------------------------------------------------------
// <auto-generated>
//     Changes to this file will be lost if the code is regenerated.
// </auto-generated>
//-----------------------------------------------------------------------------
using System;
using System.Net;

namespace Unity.Services.Authentication.Shared
{
    /// <summary>
    /// Provides a non-generic contract for the ApiResponse wrapper.
    /// </summary>
    internal interface IApiResponse
    {
        /// <summary>
        /// The content of this response
        /// </summary>
        object Content { get; }

        /// <summary>
        /// Gets or sets the status code (HTTP status code)
        /// </summary>
        /// <value>The status code.</value>
        int StatusCode { get; }

        /// <summary>
        /// Gets or sets the HTTP headers
        /// </summary>
        /// <value>HTTP headers</value>
        Multimap<string, string> Headers { get; }

        /// <summary>
        /// Gets or sets any error text defined by the calling client.
        /// </summary>
        string ErrorText { get; }

        /// <summary>
        /// The raw content of this response
        /// </summary>
        string RawContent { get; }

        /// <summary>
        /// If the operation was successful (Status Code 2XX)
        /// </summary>
        bool IsSuccessful { get; }

        /// <summary>
        /// If the operation resulted in a redirection (Status Code 3XX)
        /// </summary>
        bool IsRedirection { get; }

        /// <summary>
        /// If the operation resulted in a client error (Status Code 4XX)
        /// </summary>
        bool IsClientError { get; }

        /// <summary>
        /// If the operation resulted in a server error (Status Code 5XX)
        /// </summary>
        bool IsServerError { get; }
    }

    /// <summary>
    /// API Response
    /// </summary>
    internal class ApiResponse : IApiResponse
    {
        /// <summary>
        /// Gets or sets the status code (HTTP status code)
        /// </summary>
        /// <value>The status code.</value>
        public int StatusCode { get; internal set; }

        /// <summary>
        /// Gets or sets the HTTP headers
        /// </summary>
        /// <value>HTTP headers</value>
        public Multimap<string, string> Headers { get; internal set; }

        /// <summary>
        /// Gets or sets any error text defined by the calling client.
        /// </summary>
        public string ErrorText { get; internal set; }

        /// <summary>
        /// The raw content
        /// </summary>
        public string RawContent { get; internal set; }

        /// <summary>
        /// The data type of <see cref="Content"/>
        /// </summary>
        public virtual object Content => null;

        /// <summary>
        /// If the operation was successful (Status Code 2XX)
        /// </summary>
        public bool IsSuccessful => StatusCode >= 200 && StatusCode < 300;

        /// <summary>
        /// If the operation resulted in a redirection (Status Code 3XX)
        /// </summary>
        public bool IsRedirection => StatusCode >= 300 && StatusCode < 400;

        /// <summary>
        /// If the operation resulted in a client error (Status Code 4XX)
        /// </summary>
        public bool IsClientError => StatusCode >= 400 && StatusCode < 500;

        /// <summary>
        /// If the operation resulted in a server error (Status Code 5XX)
        /// </summary>
        public bool IsServerError => StatusCode >= 500 && StatusCode < 600;

        /// <summary>
        /// Initializes a new instance of the <see cref="ApiResponse" /> class.
        /// </summary>
        public ApiResponse()
        {
        }
    }

    /// <summary>
    /// API Response
    /// </summary>
    /// <typeparam name="T">The model associated to the response</typeparam>
    internal class ApiResponse<T> : ApiResponse, IApiResponse
    {
        /// <summary>
        /// Gets or sets the data (parsed HTTP body)
        /// </summary>
        /// <value>The data.</value>
        public T Data { get; internal set; }

        /// <summary>
        /// The data type of <see cref="Content"/>
        /// </summary>
        public override object Content => Data;

        /// <summary>
        /// Initializes a new instance of the <see cref="ApiResponse{T}" /> class.
        /// </summary>
        public ApiResponse()
        {
        }
    }
}
